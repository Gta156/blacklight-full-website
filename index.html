<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blacklight NBT Tools</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Pako JS (for Gzip decompression in Schem tool) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"></script>
    <style>
        :root {
            --bg-dark: #0a0a0f;
            --bg-darker: #070709;
            --bg-medium: rgba(10, 10, 15, 0.7);
            --bg-light: rgba(20, 20, 30, 0.7);
            --bg-sidebar: rgba(15, 15, 25, 0.95); /* Slightly more opaque */
            --neon-blue: #0e82f1;
            --neon-purple: #a742f5;
            --neon-teal: #00eeff;
            --text-light: #ffffff;
            --text-medium: #cccccc;
            --text-muted: #888888;
            --border-color-base: rgba(14, 130, 241, 0.3);
            --border-color-hover: var(--neon-teal);
            --error-color: #ff6b6b;
            --error-bg: rgba(255, 0, 0, 0.1);
            --error-border: #ff3b3b;
            --success-color: #2bff88;
            --success-bg: rgba(0, 255, 100, 0.1);
            --success-border: #00ff64;
            --info-color: #3498db;
            --info-bg: rgba(52, 152, 219, 0.1);
            --info-border: #3498db;
            --text-glow: 0 0 8px rgba(0, 238, 255, 0.6);
            --box-shadow-glow-hover: 0 0 15px rgba(0, 238, 255, 0.2);
            --box-shadow-dark: 0 10px 20px rgba(0, 0, 0, 0.3);
        }

        /* Global Styles */
        body {
            background-color: var(--bg-dark);
            background-image:
                radial-gradient(circle at 20% 20%, rgba(14, 130, 241, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(167, 66, 245, 0.03) 0%, transparent 50%);
            color: var(--text-light);
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden; /* Prevent horizontal scroll */
            display: flex;
            flex-direction: column;
        }

        main {
            flex: 1; /* Allow main content to grow */
            padding-top: 70px; /* Adjust based on navbar height */
        }

        /* Utility Classes */
        .glow-text {
            text-shadow: var(--text-glow);
        }

        .neon-border {
            border: 1px solid var(--neon-teal);
            box-shadow: 0 0 10px rgba(0, 238, 255, 0.3);
        }

        /* Navbar Styles */
        .navbar {
            background-color: var(--bg-darker);
            padding: 10px 0; /* Reduced padding */
            border-bottom: 1px solid var(--border-color-base);
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.5);
            position: fixed; /* Keep navbar fixed */
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1030; /* Ensure navbar is above other content */
        }

        .navbar-brand {
            font-size: 1.6rem; /* Adjusted size */
            font-weight: 700;
            color: var(--text-light);
            text-transform: uppercase;
            letter-spacing: 1.5px;
            margin-left: 15px; /* Space after hamburger */
        }

        .navbar-brand span {
            background: linear-gradient(90deg, var(--neon-blue), var(--neon-purple));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-weight: 900;
        }

        .hamburger-button {
            background: none;
            border: none;
            color: var(--text-light);
            font-size: 1.8rem;
            padding: 5px 15px;
            cursor: pointer;
            transition: color 0.3s ease;
        }
        .hamburger-button:hover {
            color: var(--neon-teal);
        }

        .social-icon {
            color: var(--text-light);
            font-size: 1.2rem;
            margin: 0 10px;
            transition: all 0.3s ease;
            text-decoration: none;
        }
        .social-icon:hover {
            color: var(--neon-teal);
            transform: translateY(-3px);
        }

        /* Sidebar Styles */
        .sidebar {
            position: fixed;
            top: 0;
            right: -300px; /* Start off-screen */
            width: 280px; /* Sidebar width */
            height: 100%;
            background-color: var(--bg-sidebar);
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.5);
            padding-top: 80px; /* Space below navbar */
            padding-left: 20px;
            padding-right: 20px;
            transition: right 0.4s ease-in-out;
            z-index: 1040; /* Above navbar */
            overflow-y: auto;
            border-left: 1px solid var(--border-color-base);
        }
        .sidebar.active {
            right: 0; /* Slide in */
        }
        .sidebar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 15px;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--border-color-base);
        }
        .sidebar-title {
             font-size: 1.4rem;
             font-weight: 600;
             color: var(--neon-teal);
             margin-bottom: 0;
        }
        .close-sidebar-button {
            background: none;
            border: none;
            color: var(--text-medium);
            font-size: 1.8rem;
            cursor: pointer;
            padding: 0 5px;
             transition: color 0.3s ease;
        }
         .close-sidebar-button:hover {
             color: var(--text-light);
         }

        .sidebar ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .sidebar ul li a.tool-link {
            display: block;
            padding: 12px 15px;
            color: var(--text-medium);
            text-decoration: none;
            border-radius: 5px;
            transition: background-color 0.3s ease, color 0.3s ease;
            margin-bottom: 5px; /* Space between links */
             font-size: 1rem;
        }
        .sidebar ul li a.tool-link:hover,
        .sidebar ul li a.tool-link.active { /* Style for active link */
            background-color: rgba(14, 130, 241, 0.2);
            color: var(--text-light);
            text-shadow: var(--text-glow);
        }
         .sidebar ul li a.tool-link i {
             margin-right: 10px;
             width: 20px; /* Align icons */
             text-align: center;
         }

        /* Tool Section Base Styles */
        .tool-section {
            display: none; /* Hide sections by default */
            padding-top: 20px;
            padding-bottom: 40px;
        }
        .tool-section.active {
            display: block; /* Show active section */
        }

        /* Hero Section Styles (Generalized) */
        .hero-section {
            text-align: center;
            padding: 40px 20px 20px; /* Adjusted padding */
            position: relative;
        }
        .hero-title {
            font-size: 2.2rem; /* Standardized size */
            font-weight: 700;
            margin-bottom: 15px;
            background: linear-gradient(90deg, var(--neon-blue), var(--neon-purple));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        .hero-subtitle {
            font-size: 1.1rem; /* Standardized size */
            color: var(--text-medium);
            max-width: 700px;
            margin: 0 auto 30px;
        }
         /* Specific styles for homepage content */
         #tool-homepage .hero-section {
             padding-top: 60px; /* More padding for homepage */
         }
         .welcome-message {
             font-size: 1.2rem;
             color: var(--text-light);
             margin-bottom: 40px;
             line-height: 1.6;
         }
         .tool-showcase {
             display: flex;
             flex-wrap: wrap;
             justify-content: center;
             gap: 25px;
             margin-top: 30px;
         }
         .tool-showcase-item {
             background-color: var(--bg-medium);
             border-radius: 10px;
             padding: 25px;
             width: 100%;
             max-width: 300px;
             text-align: left;
             border-left: 3px solid var(--neon-blue);
             transition: all 0.3s ease;
             cursor: pointer; /* Make it look clickable */
         }
         .tool-showcase-item:hover {
             transform: translateY(-5px);
             box-shadow: var(--box-shadow-dark);
             border-left-color: var(--neon-teal);
         }
         .tool-showcase-item h4 {
             font-size: 1.3rem;
             color: var(--neon-teal);
             margin-bottom: 10px;
         }
          .tool-showcase-item h4 i {
             margin-right: 8px;
         }
         .tool-showcase-item p {
             font-size: 0.9rem;
             color: var(--text-medium);
             margin-bottom: 0;
         }


        /* Tool Card Styles */
        .tool-card {
            background-color: var(--bg-medium);
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 30px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
             border-top: 3px solid transparent; /* Reserve space */
             border-image: linear-gradient(90deg, var(--neon-blue), var(--neon-purple)) 1;
        }
        .tool-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--box-shadow-dark);
        }
         .tool-card h3.tool-title { /* Specific class for tool titles inside cards */
             text-align: center;
             margin-bottom: 25px;
             color: var(--neon-teal);
             font-weight: 600;
             /* Removing animation for less distraction, can be added back if needed */
             /* animation: neon-glow 2s infinite; */
         }

        /* Drop Area Styles */
        .drop-area {
            margin: 20px auto;
            padding: 40px 30px;
            border: 2px dashed var(--border-color-base);
            border-radius: 10px;
            text-align: center;
            background-color: rgba(10, 10, 15, 0.5);
            color: var(--text-light);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            user-select: none;
            -webkit-user-select: none;
        }
        .drop-area::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            height: 2px;
            width: 0;
            background: linear-gradient(90deg, var(--neon-blue), var(--neon-purple));
            transition: width 0.6s ease;
        }
        .drop-area:hover {
            background-color: var(--bg-light);
            border-color: var(--neon-blue);
        }
        .drop-area:hover::after {
            width: 100%;
        }
        .drop-area.dragover {
            border-color: var(--border-color-hover);
            background-color: rgba(14, 130, 241, 0.1);
            box-shadow: 0 0 20px rgba(0, 238, 255, 0.15);
        }
        .drop-area i {
            font-size: 2.8rem; /* Slightly smaller */
            color: var(--neon-blue);
            margin-bottom: 15px;
            display: block;
        }
         .drop-area p { /* Style for the text instruction */
             margin-bottom: 5px;
             min-height: 1.5em;
             line-height: 1.5em;
             color: var(--text-medium);
         }
         .drop-area span.file-name-display { /* Style for the selected file name */
             display: block;
             margin-top: 8px;
             font-size: 0.9rem;
             color: var(--text-light); /* Make filename clearer */
             font-style: normal; /* Less muted */
             word-break: break-all; /* Prevent long names breaking layout */
             min-height: 1.2em; /* Ensure space even when empty */
         }

        /* Input Styles (Generalized) */
        .form-label { color: var(--text-medium); margin-bottom: 0.5rem; }
        .form-control, .form-select {
            background-color: var(--bg-light);
            border: 1px solid var(--border-color-base);
            border-radius: 8px;
            color: var(--text-light);
            padding: 10px 15px; /* Adjusted padding */
            margin-bottom: 15px; /* Adjusted margin */
            transition: all 0.3s ease;
        }
        .form-control::placeholder { color: #6c757d; }
        .form-control:focus, .form-select:focus {
            background-color: rgba(20, 20, 30, 0.9);
            border-color: var(--border-color-hover);
            box-shadow: var(--box-shadow-glow-hover);
            outline: none;
            color: var(--text-light);
        }
        /* Form Check/Switch */
         .form-check { padding-left: 2em; margin-bottom: 15px; } /* Ensure space for switch and add bottom margin */
        .form-check-label { padding-left: 0.5em; color: var(--text-medium); cursor: pointer; }
        .form-check-input {
             padding: 8px; margin-left: -2em; /* Position switch correctly */
             background-color: rgba(20, 20, 30, 0.7);
             border: 1px solid var(--border-color-base);
             transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out;
             cursor: pointer;
             vertical-align: middle; /* Align checkbox better with label */
             height: 1.2em; /* Explicit height */
             width: 2.5em; /* Explicit width for switch */
             background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='rgba%28255,255,255,.25%29'/%3e%3c/svg%3e"); /* Dim circle */
         }
        .form-check-input:checked {
             background-color: var(--neon-blue);
             border-color: var(--neon-blue);
             background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='%23fff'/%3e%3c/svg%3e"); /* White circle */
         }
         .form-check-input:focus {
             border-color: var(--border-color-hover);
             box-shadow: var(--box-shadow-glow-hover);
             outline: none;
         }
         .form-switch .form-check-input { width: 2.5em; margin-top: 0.2em; /* Adjust switch width & alignment */ }

        /* Button Styles (Cyber Button) */
        .btn-cyber {
            background: linear-gradient(45deg, var(--neon-blue), var(--neon-purple));
            border: none;
            border-radius: 8px;
            color: var(--text-light);
            font-weight: 600;
            padding: 10px 25px; /* Adjusted padding */
            letter-spacing: 1px;
            text-transform: uppercase;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            z-index: 1;
            cursor: pointer;
            min-width: 180px; /* Ensure buttons have a decent minimum width */
            text-align: center; /* Center text/icon */
        }
        .btn-cyber::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, var(--neon-purple), var(--neon-teal)); /* Changed hover gradient */
            transition: left 0.6s ease;
            z-index: -1;
        }
        .btn-cyber:hover::before { left: 0; }
        .btn-cyber:hover {
            box-shadow: 0 0 20px rgba(0, 238, 255, 0.5); /* Teal glow on hover */
            transform: translateY(-2px);
        }
         .btn-cyber:disabled {
             opacity: 0.6;
             cursor: not-allowed;
             background: linear-gradient(45deg, #555, #777); /* Greyed out */
             transform: none;
              box-shadow: none;
         }
         .btn-cyber:disabled:hover::before {
              left: -100%; /* Prevent hover effect when disabled */
          }
          .btn-cyber i { margin-right: 8px; }

        /* Output Preview Styles */
        .output-preview {
            display: none; /* Hide by default */
            margin-top: 30px;
            margin-bottom: 30px;
            padding: 25px; /* Adjusted padding */
            background-color: var(--bg-medium);
            border-radius: 10px;
            color: var(--text-light);
            position: relative;
             border-top: 3px solid transparent; /* Reserve space */
             border-image: linear-gradient(90deg, var(--neon-purple), var(--neon-blue)) 1; /* Reversed gradient */
        }
        .output-preview h4 {
            margin-bottom: 20px;
            background: linear-gradient(90deg, var(--neon-teal), var(--neon-blue));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            display: inline-block;
             font-weight: 600;
        }
        .output-preview h4 i { margin-right: 8px; }

        /* Code Textarea Styles (Shared) */
        .code-textarea {
            width: 100%;
            background-color: var(--bg-light);
            padding: 15px;
            border-radius: 8px;
            resize: vertical;
            white-space: pre;
            min-height: 200px;
            max-height: 450px; /* Limit max height */
            font-family: 'Consolas', 'Courier New', monospace;
            margin-bottom: 20px;
            overflow: auto; /* Both x and y scroll */
            line-height: 1.4;
            tab-size: 4;
            color: var(--text-light); /* Default color */
            border: 1px solid var(--border-color-base);
        }
        .code-textarea:focus {
            border-color: var(--border-color-hover);
            box-shadow: var(--box-shadow-glow-hover);
            outline: none;
        }
        /* Specific colors for different tool textareas */
        #raw-to-nbt-preview-text { color: var(--neon-teal); }
        #cmd-struct-preview-text { color: var(--text-medium); } /* Less intense color for JSON */
        #nbt-to-raw-preview-text { color: var(--neon-blue); }
        #schem-to-commands-preview-text { color: var(--neon-purple); } /* Schem doesn't have preview, but set for consistency */
        #java-bedrock-preview-text { color: var(--neon-blue); }

        /* Validation & Status Message Styles */
        .validation-message, .status-message {
            display: none; /* Hide by default */
            margin-top: 20px;
            padding: 12px 15px;
            border-radius: 8px;
            border-left-width: 4px;
            border-left-style: solid;
            font-size: 0.95rem;
            line-height: 1.4;
        }
        /* Error Type */
        .validation-message.error, .status-message.error {
            background-color: var(--error-bg);
            border-left-color: var(--error-border);
            color: var(--error-color);
        }
        /* Success Type */
        .validation-message.success, .status-message.success {
            background-color: var(--success-bg);
            border-left-color: var(--success-border);
            color: var(--success-color);
        }
        /* Info Type */
        .validation-message.info, .status-message.info {
            background-color: var(--info-bg);
            border-left-color: var(--info-border);
            color: var(--info-color);
        }


        /* Info Section Styles (Generalized) */
        .info-section {
            padding: 30px 0;
            background-color: rgba(10, 10, 15, 0.5); /* Slightly less opaque */
            border-top: 1px solid var(--border-color-base);
            margin-top: 40px;
        }
        .info-card {
            background-color: rgba(15, 15, 25, 0.8);
            border-radius: 10px;
            padding: 25px;
            height: 100%;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
             border-left: 3px solid var(--neon-blue); /* Consistent blue border */
        }
        .info-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--box-shadow-dark);
             border-left-color: var(--neon-teal);
        }
        .info-card h3 {
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: var(--neon-teal);
        }
         .info-card h3 i { margin-right: 8px; }
        .info-card ul {
            padding-left: 20px;
            margin-bottom: 0;
            font-size: 0.9rem;
            color: var(--text-medium);
        }
        .info-card ul li {
            margin-bottom: 8px;
            position: relative;
        }
         .info-card ul li::before { /* Custom bullet point */
            content: "\f105"; /* Font Awesome chevron-right */
            font-family: "Font Awesome 6 Free";
            font-weight: 900;
            position: absolute;
            left: -18px;
            color: var(--neon-blue);
            font-size: 0.8rem;
         }
         .info-card .btn-cyber { /* Button inside info card */
             margin-top: 15px;
             padding: 8px 15px;
             font-size: 0.9rem;
             min-width: 150px; /* Smaller min-width for info card buttons */
         }

        /* Footer Styles */
        .footer {
            background-color: var(--bg-darker);
            padding: 25px 0; /* Adjusted padding */
            border-top: 1px solid var(--border-color-base);
            margin-top: auto; /* Push footer to bottom */
            text-align: center;
        }
        .footer-links a {
            color: var(--text-medium);
            margin: 0 12px; /* Adjusted spacing */
            text-decoration: none;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        .footer-links a:hover {
            color: var(--neon-teal);
            text-shadow: var(--text-glow);
        }
        .social-links .social-icon { /* Footer specific social icons */
             font-size: 1.3rem; /* Slightly larger */
         }
        .copyright {
            color: var(--text-muted);
            font-size: 0.85rem;
            margin-top: 15px;
        }

        /* Glowing Neon Effect */
        @keyframes neon-glow {
            0%, 100% { text-shadow: 0 0 5px rgba(0, 238, 255, 0.6), 0 0 10px rgba(0, 238, 255, 0.4); }
            50% { text-shadow: 0 0 15px rgba(0, 238, 255, 0.8), 0 0 25px rgba(0, 238, 255, 0.6); }
        }
        .neon-text { /* Apply to specific titles */
            animation: neon-glow 2s infinite;
            color: var(--neon-teal);
        }

        /* File Input Styling */
        .file-input {
            /* Visually hide the default input but keep accessible */
            position: absolute !important; width: 1px !important; height: 1px !important;
            padding: 0 !important; margin: -1px !important; overflow: hidden !important;
            clip: rect(0, 0, 0, 0) !important; white-space: nowrap !important; border: 0 !important;
        }

        /* Alert styling for CmdStruct stats */
        .alert-info {
            background-color: var(--info-bg) !important;
            border-color: rgba(52, 152, 219, 0.3) !important;
            color: #aed6f1 !important; /* Lighter blue for text */
            border-left: 3px solid var(--neon-blue) !important;
            margin: 15px 0; /* Only top/bottom margin */
            padding: 10px 15px;
            border-radius: 5px;
            font-size: 0.9rem;
        }
        .alert-info p { margin-bottom: 5px !important; }
        .alert-info strong { color: #e0f2f7; /* Even lighter color */ }


        /* Responsive Styles */
        @media (max-width: 992px) {
             .sidebar { width: 250px; right: -270px; } /* Adjust width and hidden position */
             .sidebar.active { right: 0; }
             .tool-card h3.tool-title { font-size: 1.3rem; }
             .tool-showcase-item { max-width: 280px; }
        }
        @media (max-width: 768px) {
            .hero-title { font-size: 1.8rem; }
            .hero-subtitle { font-size: 1rem; max-width: 90%; }
            .info-card { margin-bottom: 20px; }
            .navbar-brand { font-size: 1.4rem; }
            .hamburger-button { font-size: 1.6rem; }
             main { padding-top: 60px; } /* Adjust for slightly smaller navbar */
             .sidebar { padding-top: 70px; }
             .code-textarea { min-height: 150px; max-height: 350px; }
             .tool-showcase-item { max-width: 90%; } /* Stack items */
        }
         @media (max-width: 576px) {
             .tool-card, .output-preview, .info-card { padding: 20px; }
             .drop-area { padding: 30px 20px; }
             .drop-area i { font-size: 2.2rem; margin-bottom: 10px;}
             .drop-area p { font-size: 0.9rem; }
             .drop-area span.file-name-display { font-size: 0.8rem;}
             .btn-cyber { padding: 10px 20px; font-size: 0.9rem; min-width: 150px; }
             .footer-links a { margin: 0 8px; display: block; margin-bottom: 5px; }
             .social-links { margin-top: 10px; }
             .hero-title { font-size: 1.6rem; }
             .hero-subtitle { font-size: 0.9rem; }
             .tool-card h3.tool-title { font-size: 1.2rem; }
             .form-check-label { font-size: 0.9rem;}
             .welcome-message { font-size: 1.1rem; }
             .tool-showcase-item { padding: 20px; }
             .tool-showcase-item h4 { font-size: 1.2rem; }
         }

    </style>
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand navbar-dark">
        <div class="container-fluid">
             <!-- Hamburger Button -->
             <button class="hamburger-button" id="hamburger-button" type="button" aria-label="Toggle navigation">
                 <i class="fas fa-bars"></i>
             </button>
             <!-- Brand Logo/Text -->
             <a class="navbar-brand" href="#"><span>Blacklight</span> NBT</a>

            <!-- Optional Navbar Items (Right Aligned) -->
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0 align-items-center">
                    <li class="nav-item">
                        <a class="social-icon" href="https://discord.gg/3pZvgq4XPq" target="_blank" rel="noopener noreferrer" title="Join our Discord">
                            <i class="fab fa-discord"></i>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="social-icon" href="#" title="GitHub Repository (Link TBD)">
                            <i class="fab fa-github"></i>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
         <div class="sidebar-header">
             <h5 class="sidebar-title">Tools Menu</h5>
             <button class="close-sidebar-button" id="close-sidebar-button" aria-label="Close menu">×</button>
         </div>
        <ul>
            <!-- Homepage Link (New, marked active) -->
            <li><a href="#" class="tool-link active" data-tool="tool-homepage"><i class="fas fa-home fa-fw"></i> Homepage</a></li>
            <!-- Other Tools -->
            <li><a href="#" class="tool-link" data-tool="tool-raw-to-nbt"><i class="fas fa-file-alt fa-fw"></i> Raw to NBT</a></li>
            <li><a href="#" class="tool-link" data-tool="tool-cmd-struct"><i class="fas fa-cubes fa-fw"></i> Commands to Structure</a></li>
            <li><a href="#" class="tool-link" data-tool="tool-nbt-to-raw"><i class="fas fa-terminal fa-fw"></i> NBT to Raw</a></li>
            <li><a href="#" class="tool-link" data-tool="tool-schem-to-commands"><i class="fas fa-file-archive fa-fw"></i> Schematic to Commands</a></li>
            <li><a href="#" class="tool-link" data-tool="tool-java-to-bedrock"><i class="fas fa-exchange-alt fa-fw"></i> Java to Bedrock</a></li>
        </ul>
    </div>

    <!-- Main Content Area -->
    <main class="container-fluid">

        <!-- Tool Section: Homepage (New, marked active) -->
        <section id="tool-homepage" class="tool-section active">
            <div class="hero-section">
                <h1 class="hero-title">WELCOME TO BLACKLIGHT NBT TOOLS</h1>
                <p class="hero-subtitle">A collection of utilities for working with Minecraft NBT data, commands, and structures, primarily focused on Bedrock Edition.</p>
                <p class="welcome-message">
                    Select a tool from the sidebar menu ( <i class="fas fa-bars"></i> ) to get started.
                    These tools are designed to help builders, map makers, and technical players streamline their workflows.
                </p>
                <div class="tool-showcase">
                    <div class="tool-showcase-item" data-tool-target="tool-raw-to-nbt">
                        <h4><i class="fas fa-file-alt fa-fw"></i> Raw to NBT</h4>
                        <p>Convert plain text command lists into a structured NBT format for specific tools.</p>
                    </div>
                    <div class="tool-showcase-item" data-tool-target="tool-cmd-struct">
                        <h4><i class="fas fa-cubes fa-fw"></i> Commands to Structure</h4>
                        <p>Generate a Bedrock .mcstructure file from setblock/fill commands.</p>
                    </div>
                    <div class="tool-showcase-item" data-tool-target="tool-nbt-to-raw">
                        <h4><i class="fas fa-terminal fa-fw"></i> NBT to Raw</h4>
                        <p>Extract raw commands from text-based NBT or structure files.</p>
                    </div>
                    <div class="tool-showcase-item" data-tool-target="tool-schem-to-commands">
                        <h4><i class="fas fa-file-archive fa-fw"></i> Schematic to Commands</h4>
                        <p>Convert Java Edition .schem/.schematic files into Bedrock commands.</p>
                    </div>
                     <div class="tool-showcase-item" data-tool-target="tool-java-to-bedrock">
                        <h4><i class="fas fa-exchange-alt fa-fw"></i> Java to Bedrock</h4>
                        <p>Translate Java Edition commands (setblock/fill) to Bedrock format.</p>
                    </div>
                </div>
                 <div class="mt-5 text-center">
                     <a href="https://discord.gg/3pZvgq4XPq" target="_blank" rel="noopener noreferrer" class="btn btn-cyber">
                         <i class="fab fa-discord"></i> Join our Discord
                     </a>
                 </div>
            </div>
        </section>

        <!-- Tool Section: Raw to NBT -->
        <section id="tool-raw-to-nbt" class="tool-section"> <!-- No longer active by default -->
            <div class="hero-section">
                <h1 class="hero-title">RAW TEXT TO NBT CONVERTER</h1>
                <p class="hero-subtitle">Convert raw text commands into a structured NBT format for specific Minecraft tools (e.g., Horion).</p>
            </div>
            <div class="row">
                <div class="col-lg-8 mx-auto">
                    <div class="tool-card">
                        <h3 class="tool-title">RAW COMMAND INPUT</h3>
                        <div id="raw-to-nbt-drop-area" class="drop-area" title="Text files only (.txt)">
                            <i class="fas fa-file-upload"></i>
                            <p>Drag and drop your raw commands file here, or click</p>
                            <span class="file-name-display">No file selected</span>
                            <input type="file" id="raw-to-nbt-input-file" accept=".txt,text/plain" class="file-input">
                        </div>
                        <div class="row mt-4">
                            <div class="col-md-6 mb-3">
                                <label for="raw-to-nbt-nbt-title" class="form-label">NBT Output Name</label>
                                <input type="text" id="raw-to-nbt-nbt-title" class="form-control" placeholder="e.g., My Awesome Build">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="raw-to-nbt-bytes-per-npc" class="form-label">Max Bytes Per NPC</label>
                                <input type="number" id="raw-to-nbt-bytes-per-npc" class="form-control" placeholder="e.g., 30000" value="30000" min="500">
                            </div>
                        </div>
                        <div class="text-center mt-3">
                            <button id="raw-to-nbt-generate-button" class="btn btn-cyber">
                                <i class="fas fa-cogs"></i>Generate NBT
                            </button>
                        </div>
                        <div id="raw-to-nbt-validation-message" class="validation-message"></div>
                    </div>
                    <div id="raw-to-nbt-output-preview" class="output-preview">
                        <h4><i class="fas fa-code"></i>GENERATED NBT OUTPUT</h4>
                        <textarea id="raw-to-nbt-preview-text" class="code-textarea" rows="10" readonly spellcheck="false" wrap="off"></textarea>
                        <div class="text-center mt-3">
                            <button id="raw-to-nbt-download-button" class="btn btn-cyber" disabled>
                                <i class="fas fa-download"></i>Download NBT File
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Tool Section: Commands to Structure -->
        <section id="tool-cmd-struct" class="tool-section">
            <div class="hero-section">
                <h1 class="hero-title">COMMANDS TO STRUCTURE</h1>
                <p class="hero-subtitle">Convert setblock/fill commands from a text file into a Bedrock Edition .mcstructure file.</p>
            </div>
            <div class="row">
                <div class="col-lg-8 mx-auto">
                    <div class="tool-card">
                        <h3 class="tool-title">COMMANDS INPUT</h3>
                        <div id="cmd-struct-drop-area" class="drop-area" title="Text files with Minecraft commands (.txt)">
                            <i class="fas fa-file-alt"></i>
                            <p>Drag and drop your commands file here, or click</p>
                             <span class="file-name-display">No file selected</span>
                            <input type="file" id="cmd-struct-input-file" accept=".txt,text/plain" class="file-input">
                        </div>
                        <div class="text-center mt-4">
                            <button id="cmd-struct-convert-button" class="btn btn-cyber">
                                <i class="fas fa-cubes"></i>Convert to Structure
                            </button>
                        </div>
                        <div id="cmd-struct-validation-message" class="validation-message"></div>
                    </div>
                    <div id="cmd-struct-output-preview" class="output-preview">
                        <h4><i class="fas fa-cube"></i>STRUCTURE PREVIEW & STATS</h4>
                        <div id="cmd-struct-preview-container" class="mb-3">
                            <!-- Stats will be inserted here by JS -->
                            <textarea id="cmd-struct-preview-text" class="code-textarea" rows="12" readonly spellcheck="false" wrap="off" placeholder="Structure JSON will appear here..."></textarea>
                        </div>
                        <div class="text-center">
                            <button id="cmd-struct-download-button" class="btn btn-cyber" disabled>
                                <i class="fas fa-download"></i>Download .mcstructure
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Tool Section: NBT to Raw -->
        <section id="tool-nbt-to-raw" class="tool-section">
            <div class="hero-section">
                <h1 class="hero-title">NBT TO RAW EXTRACTOR</h1>
                <p class="hero-subtitle">Extract raw Minecraft commands from text-based files (like .nbt, .mcstructure text dumps, or custom formats) using pattern matching.</p>
            </div>
            <div class="row">
                <div class="col-lg-8 mx-auto">
                    <div class="tool-card">
                        <h3 class="tool-title">TEXT FILE INPUT</h3>
                        <div id="nbt-raw-drop-area" class="drop-area" title="Accepts text-based .nbt, .mcstructure, or .txt files">
                             <i class="fas fa-file-code"></i>
                            <p>Drag & drop text file (NBT/TXT/MCSTRUCTURE) or click</p>
                             <span class="file-name-display">No file selected</span>
                            <input type="file" id="nbt-raw-input-file" accept=".nbt,.mcstructure,.txt,text/plain" class="file-input">
                        </div>

                         <!-- Filter Checkbox -->
                         <div class="d-flex justify-content-center mt-3 mb-3">
                             <div class="form-check form-switch">
                                 <input class="form-check-input" type="checkbox" role="switch" id="nbt-raw-filter-checkbox">
                                 <label class="form-check-label" for="nbt-raw-filter-checkbox">Show Only Fill/Setblock Commands</label>
                             </div>
                         </div>

                        <div class="text-center mt-2">
                            <button id="nbt-raw-extract-button" class="btn btn-cyber">
                                <i class="fas fa-search"></i>Extract Raw Commands
                            </button>
                        </div>
                        <div id="nbt-raw-validation-message" class="validation-message"></div>
                    </div>
                    <div id="nbt-raw-output-preview" class="output-preview">
                        <h4><i class="fas fa-terminal"></i>EXTRACTED RAW COMMANDS</h4>
                        <textarea id="nbt-raw-preview-text" class="code-textarea" rows="10" readonly spellcheck="false" wrap="off" placeholder="Extracted commands will appear here..."></textarea>
                        <div class="text-center mt-3">
                            <button id="nbt-raw-download-button" class="btn btn-cyber" disabled>
                                <i class="fas fa-download"></i>Download Raw Commands
                            </button>
                        </div>
                    </div>
                     <!-- Info Section for NBT to Raw -->
                     <div class="info-section mt-5">
                         <div class="row justify-content-center">
                             <div class="col-md-6 mb-4">
                                 <div class="info-card">
                                     <h3><i class="fas fa-info-circle"></i>How it Works & Limitations</h3>
                                     <ul>
                                         <li>Reads the uploaded file as plain text.</li>
                                         <li>Uses regular expressions to find text matching common command patterns:</li>
                                         <li>   - `"cmd_line": "..."` (handles basic escapes)</li>
                                         <li>   - Standard `setblock ...` or `fill ...` syntax.</li>
                                         <li>Attempts to clean up extracted commands (e.g., fix `\\\"` -> `"`).</li>
                                         <li><strong>Limitation:</strong> Cannot parse true binary NBT. Only works on text representations.</li>
                                         <li><strong>Limitation:</strong> Relies on commands matching the expected text patterns. Complex or unusual formatting might be missed.</li>
                                     </ul>
                                 </div>
                             </div>
                             <div class="col-md-6 mb-4">
                                 <div class="info-card">
                                     <h3><i class="fas fa-wrench"></i>Troubleshooting</h3>
                                     <ul>
                                         <li><i>No commands found:</i> File likely doesn't contain commands in a recognized text format, or it might be binary. Open the file in a text editor to check.</li>
                                         <li><i>Incorrect commands extracted:</i> The regex patterns might be too broad or too narrow for your specific file's format.</li>
                                         <li><i>File reading error:</i> Ensure the file is accessible, not corrupted, and has read permissions.</li>
                                         <li><i>Checkbox filtering too much:</i> Ensure the desired commands actually start with `fill` or `setblock`.</li>
                                     </ul>
                                     <div class="mt-3 text-center">
                                         <a href="https://discord.gg/3pZvgq4XPq" target="_blank" rel="noopener noreferrer" class="btn btn-sm btn-cyber">
                                             <i class="fab fa-discord"></i>Join Community
                                         </a>
                                     </div>
                                 </div>
                             </div>
                         </div>
                     </div>
                </div>
            </div>
        </section>

        <!-- Tool Section: Schematic to Commands -->
        <section id="tool-schem-to-commands" class="tool-section">
            <div class="hero-section">
                 <h1 class="hero-title">SCHEMATIC TO COMMANDS</h1>
                 <p class="hero-subtitle">Convert binary .schem or .schematic files (Java Edition format) into Bedrock Edition setblock/fill commands.</p>
             </div>
             <div class="row">
                 <div class="col-lg-8 mx-auto">
                     <div class="tool-card">
                         <h3 class="tool-title">SCHEMATIC FILE INPUT</h3>
                         <div id="schem-drop-area" class="drop-area" title="Accepts .schem or .schematic files">
                             <i class="fas fa-file-archive"></i>
                             <p>Drag and drop your .schem/.schematic file here, or click</p>
                             <span id="schem-file-name" class="file-name-display">No file selected</span> <!-- Use specific ID -->
                             <input type="file" id="schem-input-file" accept=".schem,.schematic" class="file-input">
                         </div>
                         <div class="row mt-4">
                             <div class="col-md-6 mb-3">
                                 <label for="schem-outputName" class="form-label">Output File Name Base</label>
                                 <input type="text" id="schem-outputName" class="form-control" placeholder="e.g., MyBuild_Commands" value="SchemCommands">
                             </div>
                             <div class="col-md-6 mb-3 d-flex align-items-center justify-content-center">
                                <div class="form-check form-switch mt-md-4"> <!-- Adjusted margin for medium screens -->
                                     <input class="form-check-input" type="checkbox" role="switch" id="schem-includeAir">
                                     <label class="form-check-label" for="schem-includeAir">Include Air Blocks</label>
                                 </div>
                             </div>
                         </div>
                         <div class="row">
                             <label class="form-label col-12">Command Offset (Relative to Player)</label>
                             <div class="col-md-4 mb-3">
                                 <label for="schem-offsetX" class="form-label visually-hidden">Offset X</label>
                                 <input type="number" id="schem-offsetX" class="form-control" placeholder="X Offset (~)" value="0" title="Offset X">
                             </div>
                             <div class="col-md-4 mb-3">
                                 <label for="schem-offsetY" class="form-label visually-hidden">Offset Y</label>
                                 <input type="number" id="schem-offsetY" class="form-control" placeholder="Y Offset (~)" value="0" title="Offset Y">
                             </div>
                             <div class="col-md-4 mb-3">
                                 <label for="schem-offsetZ" class="form-label visually-hidden">Offset Z</label>
                                 <input type="number" id="schem-offsetZ" class="form-control" placeholder="Z Offset (~)" value="0" title="Offset Z">
                             </div>
                         </div>
                         <div class="text-center mt-3">
                             <button id="schem-generate-button" class="btn btn-cyber">
                                 <i class="fas fa-cogs"></i>Generate Commands
                             </button>
                         </div>
                         <div id="schem-status" class="status-message"></div> <!-- Use status message styling -->
                     </div>
                     <!-- No preview area for schem to commands, direct download -->
                 </div>
             </div>
        </section>

        <!-- Tool Section: Java to Bedrock -->
        <section id="tool-java-to-bedrock" class="tool-section">
             <div class="hero-section">
                 <h1 class="hero-title">JAVA TO BEDROCK TRANSLATOR</h1>
                 <p class="hero-subtitle">Convert Minecraft Java Edition setblock/fill commands to Bedrock Edition format using client-side mappings.</p>
             </div>
            <div class="row">
                 <div class="col-lg-8 mx-auto">
                     <div class="tool-card">
                         <h3 class="tool-title">JAVA COMMAND INPUT</h3>
                         <div id="java-bedrock-drop-area" class="drop-area" title="Text files with Java commands (.txt)">
                              <i class="fab fa-java"></i>
                             <p>Drag and drop your Java commands file here, or click</p>
                             <span class="file-name-display">No file selected</span>
                             <input type="file" id="java-bedrock-input-file" accept=".txt,text/plain" class="file-input">
                         </div>
                         <div class="text-center mt-4">
                             <button id="java-bedrock-translate-button" class="btn btn-cyber">
                                 <i class="fas fa-exchange-alt"></i>Translate Commands
                             </button>
                         </div>
                         <div id="java-bedrock-validation-message" class="validation-message"></div>
                     </div>
                     <div id="java-bedrock-output-preview" class="output-preview">
                         <h4><i class="fas fa-code"></i>TRANSLATED BEDROCK COMMANDS</h4>
                         <textarea id="java-bedrock-preview-text" class="code-textarea" rows="10" readonly spellcheck="false" wrap="off" placeholder="Translated Bedrock commands will appear here..."></textarea>
                         <div class="text-center mt-3">
                             <button id="java-bedrock-download-button" class="btn btn-cyber" disabled>
                                 <i class="fas fa-download"></i>Download Bedrock Commands
                             </button>
                         </div>
                     </div>
                 </div>
             </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container text-center">
            <div class="footer-links">
                <a href="#">Privacy Policy</a>
                <a href="#">Terms of Use</a>
            </div>
            <div class="social-links mt-3">
                <a href="https://discord.gg/3pZvgq4XPq" target="_blank" rel="noopener noreferrer" class="social-icon"><i class="fab fa-discord"></i></a>
                <a href="#" class="social-icon"><i class="fab fa-github"></i></a>
            </div>
            <div class="copyright">
                © 2024 Blacklight NBT Tools. Not affiliated with Minecraft or Mojang AB.
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Mapping Data (MUST be loaded BEFORE translator.js and script.js) -->
    <script src="mappings.js"></script>

    <!-- Translator Logic (Client-Side Version) -->
    <script src="translator.js"></script>

    <!-- Combined Custom UI/Tool Logic -->
    <script src="script.js"></script>

    <!-- Add click listener for homepage showcase items -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const showcaseItems = document.querySelectorAll('.tool-showcase-item');
            showcaseItems.forEach(item => {
                item.addEventListener('click', () => {
                    const targetToolId = item.getAttribute('data-tool-target');
                    const targetLink = document.querySelector(`.sidebar .tool-link[data-tool='${targetToolId}']`);
                    if (targetLink) {
                        targetLink.click(); // Simulate a click on the sidebar link
                    } else {
                        console.warn(`Could not find sidebar link for tool target: ${targetToolId}`);
                    }
                });
            });
        });
    </script>

</body>
</html>